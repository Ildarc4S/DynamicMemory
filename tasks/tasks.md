### **Сюжет: "Восстановление Кристалла Судьбы"**

**Катастрофа**

В древние времена маги-ученые создали артефакт невероятной силы — **Кристалл Судьбы**. Он поддерживал равновесие мира, а его энергия была упорядочена в виде совершенной многомерной матрицы. Архимаг, стремясь к абсолютной власти, попытался переписать матрицу Кристалла, но его ритуал пошел не так. Матрица **расслоилась** и **повредилась**. Кристалл не разрушился, но его сила стала хаотичной и неуправляемой, вызывая по всему миру магические аномалии, искажения пространства и времени.

**Призыв к герою**

Главный герой (ученик программиста-мага) находит древний терминал — "Консоль Архитектора". Это интерфейс для управления матрицей Кристалла. На экране загорается сообщение от последнего Стража Кристалла:

> *"Система повреждена. Целостность матрицы Кристалла Судьбы под угрозой. Для восстановления контроля необходимо выполнить последовательность операций по реконструкции и перекалибровки. Введите команды..."*

---

### **Quest 1: Диагностика и Сканирование**
**Файл:** `src/q1_matrix_init.cc`

*На экране консоли мигает предупреждение:*
> **"Активирован модуль первичной диагностики. Для оценки ущерба необходимо визуализировать фрагменты расслоившейся матрицы."**

**Задача:** Написать функцию, которая создает и выводит на экран `фрагмент матрицы Кристалла`.

**Технические требования:**
- Программа должна считывать два целых числа `N` и `M` - размеры матрицы
- Если `N` или `M` ≤ 0, вывести `"n/a"` и завершить работу
- Создать матрицу размером `N × M` и заполнить ее по правилу: `matrix[i][j] = i + j`
- Вывести матрицу построчно, элементы в строке разделять пробелами (в конце матрицы не должно быть пробела)
- После вывода освободить память

**Примеры работы:**

| Входные данные | Выходные данные |
|----------------|-----------------|
| `2 3`          | `0 1 2`<br>`1 2 3` |
| `3 2`          | `0 1`<br>`1 2`<br>`2 3` |
| `0 5`          | `n/a` |
| `2 -1`         | `n/a` |


### **Quest 2: Обнаружение Аномалий**
**Файл:** `src/q2_find_anomalies.cc`

*Консоль выводит тревожное сообщение:*
> **"Обнаружены энергетические аномалии! Нестабильные ячейки угрожают целостности структуры. Необходимо локализовать все ячейки с критическими значениями."**

**Задача:** Найти и вывести координаты всех "аномальных" ячеек матрицы.

**Технические требования:**
- Считать целое число `K` - пороговое значение аномалии
- Считать размеры матрицы `N` и `M`
- Если `N` ≤ 0 или `M` ≤ 0, вывести `"n/a"` и завершить работу
- Считать матрицу размером `N × M` с консоли
- Найти все ячейки, где `абсолютное значение` элемента > `K`
- Для каждой аномальной ячейки вывести формат: `(строка, столбец): значение`
- Выводить аномалии в порядке обхода матрицы (сначала по строкам, затем по столбцам)
- Если аномалий нет, вывести `"NAD"`  
*NAD - No anomalies detected*

**Примеры работы:**

| Входные данные | Выходные данные |
|----------------|-----------------|
| `50`<br>`2 3`<br>`10 60 30`<br>`70 20 80` | `(0, 1): 60`<br>`(1, 0): 70`<br>`(1, 2): 80` |
| `100`<br>`2 2`<br>`10 20`<br>`30 40` | `NAD` |
| `40`<br>`2 2`<br>`50 -60`<br>`30 10` | `(0, 0): 50`<br>`(0, 1): -60` |
| `50`<br>`0 3` | `n/a` |


### **Квест 3: Стабилизация Ядра (Сложение матриц)**

**Файл:** `src/q3_matrix_sum.cc`

*Голос Стража звучит напряженно:*
> **"Энергетическое ядро дестабилизировано! Для стабилизации требуется сложить два комплементарных энергопотока."**

**Задача:** Реализовать поэлементное сложение двух матриц.

**Технические требования:**
- Считать размеры первой матрицы `N1` и `M1`
- Считать первую матрицу `A` размера `N1 × M1`
- Считать размеры второй матрицы `N2` и `M2`
- Считать вторую матрицу `B` размера `N2 × M2`
- Если размеры ≤ `0`, вывести `"n/a"` и завершить работу
- Если матрицы невозможно сложить, вывести `"MSM"`
- Вывести результирующую матрицу построчно, элементы разделять пробелами

*MSM - Matrix size mismatch*  
*После последнего элемента не должно быть пробелов*

**Примеры работы:**

| Входные данные | Выходные данные |
|----------------|-----------------|
| `2 2`<br>`1 2`<br>`3 4`<br>`2 2`<br>`5 6`<br>`7 8` | `6 8`<br>`10 12` |
| `3 2`<br>`1 1`<br>`2 2`<br>`3 3`<br>`3 2`<br>`4 4`<br>`5 5`<br>`6 6` | `5 5`<br>`7 7`<br>`9 9` |
| `2 3`<br>`1 2 3`<br>`4 5 6`<br>`2 3`<br>`-1 -2 -3`<br>`-4 -5 -6` | `0 0 0`<br>`0 0 0` |
| `2 2`<br>`1 2`<br>`3 4`<br>`2 3`<br>`1 2 3`<br>`4 5 6` | `MSM` |
| `0 3`<br>`2 2`<br>`1 2`<br>`3 4` | `n/a` |


### **Квест 4: Усиление Потока (Умножение на скаляр)**

**Файл:** `src/q4_scalar_multiply.cc`

*Консоль показывает мерцающие показатели:*
> **"Энергетический поток слишком слаб! Требуется усиление всех каналов одновременно."**

**Задача:** Умножить матрицу на скаляр.

**Технические требования:**
- Считать число `K` - коэффициент усиления
- Считать размеры матрицы `N` и `M`
- Если размеры ≤ `0`, вывести `"n/a"` и завершить работу
- Считать матрицу `A` размера `N × M`
- Выводить матрицу построчно, элементы разделять пробелами

*После последнего элемента не должно быть пробелов*

**Примеры работы:**

| Входные данные | Выходные данные |
|----------------|-----------------|
| `2`<br>`2 2`<br>`1 2`<br>`3 4` | `2 4`<br>`6 8` |
| `-3`<br>`2 3`<br>`1 2 3`<br>`4 5 6` | `-3 -6 -9`<br>`-12 -15 -18` |
| `0`<br>`3 2`<br>`10 20`<br>`30 40`<br>`50 60` | `0 0`<br>`0 0`<br>`0 0` |
| `1.5`<br>`2 2`<br>`2 4`<br>`6 8` | `3 6`<br>`9 12` |
| `5`<br>`0 3` | `n/a` |

### **Квест 5: Синхронизация Измерений (Транспонирование)**

**Файл:** `src/q5_matrix_transpose.cc`

*Консоль отображает искаженное изображение:*
> **"Обнаружено рассогласование пространственных координат! Выполните транспонирование для восстановления ориентации."**

**Задача:** Реализовать транспонирование матрицы.

**Технические требования:**
- Считать размеры `N` и `M`
- Если размеры ≤ `0`, вывести `"n/a"` и завершить работу
- Считать матрицу `A` размера `N × M`
- Создать транспонированную матрицу
- Вывести полученную матрицу построчно, элементы разделять пробелами (после последнего элемента не должно быть пробелов)

**Примеры работы:**

| Входные данные | Выходные данные |
|----------------|-----------------|
| `2 3`<br>`1 2 3`<br>`4 5 6` | `1 4`<br>`2 5`<br>`3 6` |
| `3 2`<br>`1 2`<br>`3 4`<br>`5 6` | `1 3 5`<br>`2 4 6` |
| `1 4`<br>`10 20 30 40` | `10`<br>`20`<br>`30`<br>`40` |
| `0 3` | `n/a` |

---

### **Квест 6: Коррекция Искажений (Поворот матрицы)**

**Файл:** `src/q6_matrix_rotate.cc`

*Голос системы звучит обеспокоенно:*
> **"Некоторые фрагменты повернуты на 90 градусов! Необходимо корректировать их ориентацию перед сборкой."**

**Задача:** Реализовать поворот матрицы на 90 градусов по часовой стрелке.

**Технические требования:**
- Считать размеры `N` и `M`
- Если `N` ≤ 0 или `M` ≤ 0, вывести `"n/a"` и завершить работу
- Считать матрицу `A` размера `N × M`
- Создать повернутую матрицу `B` размера `M × N`, где `B[i][j] = A[N-1-j][i]`
- Вывести результат поворота построчно, элементы разделять пробелами

**Примеры работы:**

| Входные данные | Выходные данные |
|----------------|-----------------|
| `2 3`<br>`1 2 3`<br>`4 5 6` | `4 1`<br>`5 2`<br>`6 3` |
| `3 3`<br>`1 2 3`<br>`4 5 6`<br>`7 8 9` | `7 4 1`<br>`8 5 2`<br>`9 6 3` |
| `1 4`<br>`10 20 30 40` | `10`<br>`20`<br>`30`<br>`40` |
| `2 2`<br>`1 2`<br>`3 4` | `3 1`<br>`4 2` |
| `0 3` | `n/a` |

---

### **Квест 7: Сборка Мозаики (Вставка подматрицы)**

**Файл:** `src/q7_insert_submatrix.cc`

*Голос Стража звучит обнадеживающе:*
> **"Все подготовительные операции завершены. Вставьте восстановленные подматрицы в основной каркас."**

**Задача:** Вставить подматрицу в указанную позицию большой матрицы.

**Технические требования:**
- Считать размеры каркаса `N` и `M`
- Если размеры ≤ 0, вывести `"n/a"` и завершить работу
- Считать матрицу-каркас размера `N × M` с консоли
- Считать координаты вставки `start_i` и `start_j`
- Если координаты выходя за границы матрицы, вывести `"n/a"` и завершить работу
- Считать размеры фрагмента `P` и `Q`
- Если размеры ≤ 0, вывести `"n/a"` и завершить работу
- Считать подматрицу `F` размера `P × Q`
- Вставка возможна только если вся область `(start_i, start_j)` до `(start_i+P-1, start_j+Q-1)`
  состоит из нулей. Если в этой области есть ненулевые элементы, вывести `"IOB"`
- Вывести итоговую матрицу построчно, разделяя элементы пробелами

*IOB - Insertion out of bounds*  
*После последнего элемента не должно быть пробелов*

**Примеры работы:**

| Входные данные | Выходные данные |
|----------------|-----------------|
| `3 3`<br>`1 2 3`<br>`0 0 0`<br>`4 5 6`<br>`1 0`<br>`1 3`<br>`7 8 9`<br> | `1 2 3`<br>`7 8 9`<br>`4 5 6` |
| `2 4`<br>`1 0 0 2`<br>`3 0 0 0`<br>`0 1`<br>`2 2`<br>`10 20`<br>`30 40` | `1 10 20 2`<br>`3 30 40 0` |
| `3 3`<br>`1 2 3`<br>`4 5 6`<br>`7 8 9`<br>`2 2`<br>`0 0`<br>`1 2`<br>`3 4` | `IOB` |
| `2 3`<br>`1 0 0`<br>`0 2 0`<br>`2 1`<br>`0 0`<br>`5 6` | `1 5 0`<br>`0 2 6` |
| `0 3`<br>`0 2`<br>`1 2`<br>`11 12` | `n/a` |

---

### **Квест 8: Финальная Активация**

**Файл:** `src/q8_matrix_multiply.cc`

*Терминал гудит, экран заполняется энергией:*
> **"КРИТИЧЕСКАЯ ОПЕРАЦИЯ! Перемножьте восстановленную матрицу с Матрицей-Ключом для активации!"**

**Задача:** Реализовать умножение двух матриц.

**Технические требования:**
- Считать размеры первой матрицы `N1` и `M1`
- Если размеры ≤ 0, вывести `"n/a"` и завершить работу
- Считать первую матрицу `A` размера `N1 × M1`
- Считать размеры второй матрицы `N2` и `M2`
- Если размеры ≤ 0, вывести `"n/a"` и завершить работу
- Считать вторую матрицу `B` размера `N2 × M2`
- Если матрицы несовместимы, вывести `"IM"`
- Вычислить матрицу-произведение
- Вывести результирующую матрицу построчно

*IM - Incompatible matrices*  
*После последнего элемента не должно быть пробелов*

**Примеры работы:**

| Входные данные | Выходные данные |
|----------------|-----------------|
| `2 3`<br>`1 2 3`<br>`4 5 6`<br>`3 2`<br>`7 8`<br>`9 10`<br>`11 12` | `58 64`<br>`139 154` |
| `1 3`<br>`1 2 3`<br>`3 1`<br>`4`<br>`5`<br>`6` | `32` |
| `2 2`<br>`1 0`<br>`0 1`<br>`2 2`<br>`5 6`<br>`7 8` | `5 6`<br>`7 8` |
| `2 3`<br>`1 2 3`<br>`4 5 6`<br>`2 2`<br>`1 2`<br>`3 4` | `IM` |
| `0 3`<br>`2 2`<br>`1 2`<br>`3 4` | `n/a` |


### **Квест 9: Проверка Целостности**

**Файл:** `src/q9_matrix_determinant.cc`

*Консоль затихает:*
> **"Вычислите определитель финальной матрицы для проверки стабильности."**

**Задача:** Вычислить определитель квадратной матрицы.

**Технические требования:**
- Считать размер `N` квадратной матрицы
- Если `N` ≤ 0, вывести `"n/a"` и завершить работу
- Считать матрицу `A` размера `N × N`
- Вычислить определитель
- Вывести значение определителя с точностью до 2 знаков после запятой
- Если определитель = 0, дополнительно вывести `"MS"`

*Размер матрицы подается не больше 3*

**MS - Matrix is singular**

**Примеры работы:**

| Входные данные | Выходные данные |
|----------------|-----------------|
| `2`<br>`3 1`<br>`2 4` | `10.00` |
| `3`<br>`2 -1 0`<br>`0 3 2`<br>`1 0 -1` | `-8.00` |
| `1`<br>`5` | `5.00` |
| `3`<br>`1 2 3`<br>`4 5 6`<br>`7 8 9` | `0.00`<br>`MS` |
| `0` | `n/a` |

---

### **Квест 10: Анализ Энергетического Следа**

**Файл:** `src/q10_matrix_trace.cc`

*Финальная проверка:*
> **"Определите энергетический след"**

**Задача:** Вычислить след матрицы.

**Технические требования:**
- Считать размеры `N` и `M`
- Если размеры ≤ 0, вывести `"n/a"` и завершить работу
- Считать матрицу `A` размера `N × M`
- Если матрица не квадратная (`N ≠ M`), вывести `"n/a"`
- Вычислить и вывести след матрицы в формате: `Trace: <значение>`

**Примеры работы:**

| Входные данные | Выходные данные |
|----------------|-----------------|
| `3 3`<br>`1 2 3`<br>`4 5 6`<br>`7 8 9` | `Trace: 15` |
| `2 2`<br>`10 20`<br>`30 40` | `Trace: 50` |
| `1 1`<br>`5` | `Trace: 5` |
| `2 3`<br>`1 2 3`<br>`4 5 6` | `n/a` |
| `0 3` | `n/a` |

## **Восстановление**

*Экран заливается ровным светом:*
> **"ОПЕРАЦИЯ ЗАВЕРШЕНА. КРИСТАЛЛ СУДЬБЫ ВОССТАНОВЛЕН. Баланс мироздания сохранен. Благодарность от Совета Стражей записана в вечные архивы. Мир спасен, оператор."**

*Финальная надпись:*
> **"Система переходит в режим ожидания. До новых встреч, герой."**